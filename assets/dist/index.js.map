{"version":3,"file":"index.js","mappings":"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","sources":["webpack://echodash/./node_modules/react-dom/client.js","webpack://echodash/external window \"ReactDOM\"","webpack://echodash/webpack/bootstrap","webpack://echodash/external window \"React\"","webpack://echodash/external window [\"wp\",\"i18n\"]","webpack://echodash/./assets/src/components/EchoDashLogo.tsx","webpack://echodash/./assets/src/components/IntegrationList.tsx","webpack://echodash/./assets/src/components/IntegrationDetail.tsx","webpack://echodash/./assets/src/components/MergeTagSelector.tsx","webpack://echodash/./assets/src/components/TriggerModal.tsx","webpack://echodash/./assets/src/App.tsx","webpack://echodash/./assets/src/index.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","module.exports = window[\"ReactDOM\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","import React from 'react';\n\ninterface EchoDashLogoProps {\n\tclassName?: string;\n\twidth?: number | string;\n\theight?: number | string;\n}\n\nexport const EchoDashLogo: React.FC<EchoDashLogoProps> = ({\n\tclassName = '',\n\twidth = 189,\n\theight = 36,\n}) => {\n\treturn (\n\t\t<svg \n\t\t\twidth={width} \n\t\t\theight={height} \n\t\t\tviewBox=\"0 0 189 36\" \n\t\t\tfill=\"none\" \n\t\t\txmlns=\"http://www.w3.org/2000/svg\" \n\t\t\tclassName={className}\n\t\t\taria-label=\"EchoDash\"\n\t\t>\n\t\t\t<path d=\"M182.926 12.7229C186.698 12.7229 188.528 14.7598 188.528 18.977V27.4114H184.202V20.1819C184.202 17.6286 183.342 16.7967 181.29 16.7967C178.988 16.7967 177.768 18.0016 177.768 20.4114V27.4114H173.469V7.32947H177.768V16.309H177.851C178.461 14.0426 180.264 12.7229 182.926 12.7229Z\" fill=\"#0A0079\"/>\n\t\t\t<path d=\"M182.926 12.7229C186.698 12.7229 188.528 14.7598 188.528 18.977V27.4114H184.202V20.1819C184.202 17.6286 183.342 16.7967 181.29 16.7967C178.988 16.7967 177.768 18.0016 177.768 20.4114V27.4114H173.469V7.32947H177.768V16.309H177.851C178.461 14.0426 180.264 12.7229 182.926 12.7229Z\" fill=\"#202E41\"/>\n\t\t\t<path d=\"M164.131 27.6983C160.886 27.6983 157.613 26.1491 157.059 23.5385L161.08 22.5344C161.468 23.8827 162.467 24.4565 164.353 24.4565C165.934 24.4565 166.766 24.1122 166.766 23.2803C166.738 22.5057 165.989 22.104 164.408 21.8745L161.801 21.5303C158.945 21.186 157.336 19.5221 157.281 17.1122C157.225 14.2721 159.472 12.7229 163.604 12.7229C167.736 12.7229 170.038 14.3008 170.759 16.9688L166.793 17.8581C166.544 16.4237 165.434 15.7352 163.77 15.7352C162.328 15.7352 161.579 16.1368 161.579 16.9401C161.579 17.5999 162.245 18.1163 163.632 18.2598L166.682 18.5754C169.373 18.8622 171.037 20.4975 171.092 22.8786C171.148 26.0057 168.652 27.6983 164.131 27.6983Z\" fill=\"#0A0079\"/>\n\t\t\t<path d=\"M164.131 27.6983C160.886 27.6983 157.613 26.1491 157.059 23.5385L161.08 22.5344C161.468 23.8827 162.467 24.4565 164.353 24.4565C165.934 24.4565 166.766 24.1122 166.766 23.2803C166.738 22.5057 165.989 22.104 164.408 21.8745L161.801 21.5303C158.945 21.186 157.336 19.5221 157.281 17.1122C157.225 14.2721 159.472 12.7229 163.604 12.7229C167.736 12.7229 170.038 14.3008 170.759 16.9688L166.793 17.8581C166.544 16.4237 165.434 15.7352 163.77 15.7352C162.328 15.7352 161.579 16.1368 161.579 16.9401C161.579 17.5999 162.245 18.1163 163.632 18.2598L166.682 18.5754C169.373 18.8622 171.037 20.4975 171.092 22.8786C171.148 26.0057 168.652 27.6983 164.131 27.6983Z\" fill=\"#202E41\"/>\n\t\t\t<path d=\"M147.792 12.7229C151.841 12.7229 154.837 14.5877 154.837 18.2024V27.4114H151.148L150.649 24.4278H150.565C149.761 26.5508 147.986 27.6983 145.296 27.6983C142.134 27.6983 140.082 26.1491 140.082 23.768C140.082 20.9565 141.607 19.9524 149.29 18.7475L150.676 18.518L150.649 17.9729C150.51 16.5672 149.623 16.1942 147.737 16.1942C145.573 16.1942 144.63 16.9688 144.547 18.518L140.997 17.5999C141.164 14.3581 144.325 12.7229 147.792 12.7229ZM146.738 24.6286C148.901 24.6286 150.621 22.6778 150.676 20.8418L149.484 21.0426C146.378 21.645 144.353 22.1327 144.353 23.309C144.353 24.1696 145.157 24.6286 146.738 24.6286Z\" fill=\"#0A0079\"/>\n\t\t\t<path d=\"M147.792 12.7229C151.841 12.7229 154.837 14.5877 154.837 18.2024V27.4114H151.148L150.649 24.4278H150.565C149.761 26.5508 147.986 27.6983 145.296 27.6983C142.134 27.6983 140.082 26.1491 140.082 23.768C140.082 20.9565 141.607 19.9524 149.29 18.7475L150.676 18.518L150.649 17.9729C150.51 16.5672 149.623 16.1942 147.737 16.1942C145.573 16.1942 144.63 16.9688 144.547 18.518L140.997 17.5999C141.164 14.3581 144.325 12.7229 147.792 12.7229ZM146.738 24.6286C148.901 24.6286 150.621 22.6778 150.676 20.8418L149.484 21.0426C146.378 21.645 144.353 22.1327 144.353 23.309C144.353 24.1696 145.157 24.6286 146.738 24.6286Z\" fill=\"#202E41\"/>\n\t\t\t<path d=\"M118.471 27.4114V7.32947H128.705C135.139 7.32947 138.772 11.2885 138.772 17.3705C138.772 23.5098 135.083 27.4114 128.705 27.4114H118.471ZM122.991 23.1082H128.594C132.782 23.1082 134.14 21.7024 134.14 17.3705C134.14 13.0385 132.782 11.6041 128.594 11.6041H122.991V23.1082Z\" fill=\"#0A0079\"/>\n\t\t\t<path d=\"M118.471 27.4114V7.32947H128.705C135.139 7.32947 138.772 11.2885 138.772 17.3705C138.772 23.5098 135.083 27.4114 128.705 27.4114H118.471ZM122.991 23.1082H128.594C132.782 23.1082 134.14 21.7024 134.14 17.3705C134.14 13.0385 132.782 11.6041 128.594 11.6041H122.991V23.1082Z\" fill=\"#202E41\"/>\n\t\t\t<path d=\"M107.177 27.6983C102.462 27.6983 98.8848 25.0303 98.8848 20.2393C98.8848 15.4196 102.518 12.7229 107.177 12.7229C111.975 12.7229 115.47 15.4483 115.47 20.2393C115.47 25.0877 111.864 27.6983 107.177 27.6983ZM107.177 23.6245C109.784 23.6245 111.143 22.7639 111.143 20.2393C111.143 17.8581 110.173 16.7967 107.177 16.7967C104.293 16.7967 103.211 17.8581 103.211 20.2393C103.211 22.8213 104.626 23.6245 107.177 23.6245Z\" fill=\"#0A0079\"/>\n\t\t\t<path d=\"M107.177 27.6983C102.462 27.6983 98.8848 25.0303 98.8848 20.2393C98.8848 15.4196 102.518 12.7229 107.177 12.7229C111.975 12.7229 115.47 15.4483 115.47 20.2393C115.47 25.0877 111.864 27.6983 107.177 27.6983ZM107.177 23.6245C109.784 23.6245 111.143 22.7639 111.143 20.2393C111.143 17.8581 110.173 16.7967 107.177 16.7967C104.293 16.7967 103.211 17.8581 103.211 20.2393C103.211 22.8213 104.626 23.6245 107.177 23.6245Z\" fill=\"#202E41\"/>\n\t\t\t<path d=\"M90.7854 12.7229C94.5573 12.7229 96.3877 14.7598 96.3877 18.977V27.4114H92.0612V20.1819C92.0612 17.6286 91.2014 16.7967 89.1491 16.7967C86.8472 16.7967 85.6269 18.0016 85.6269 20.4114V27.4114H81.3281V7.32947H85.6269V16.309H85.7101C86.3202 14.0426 88.123 12.7229 90.7854 12.7229Z\" fill=\"#0A0079\"/>\n\t\t\t<path d=\"M90.7854 12.7229C94.5573 12.7229 96.3877 14.7598 96.3877 18.977V27.4114H92.0612V20.1819C92.0612 17.6286 91.2014 16.7967 89.1491 16.7967C86.8472 16.7967 85.6269 18.0016 85.6269 20.4114V27.4114H81.3281V7.32947H85.6269V16.309H85.7101C86.3202 14.0426 88.123 12.7229 90.7854 12.7229Z\" fill=\"#202E41\"/>\n\t\t\t<path d=\"M71.4833 27.6983C66.4634 27.6983 63.1076 24.9442 63.1076 20.2393C63.1076 15.4483 66.4912 12.7229 71.4833 12.7229C75.9762 12.7229 78.3613 14.6737 79.2488 18.4893L75.0887 19.4647C74.7282 17.5713 73.6465 16.7967 71.4833 16.7967C68.5435 16.7967 67.4064 17.8581 67.4064 20.2393C67.4064 22.5918 68.5435 23.6245 71.4833 23.6245C73.8961 23.6245 74.6727 22.8213 75.0887 20.9565L79.2488 21.9319C78.3336 25.7762 75.9207 27.6983 71.4833 27.6983Z\" fill=\"#0A0079\"/>\n\t\t\t<path d=\"M71.4833 27.6983C66.4634 27.6983 63.1076 24.9442 63.1076 20.2393C63.1076 15.4483 66.4912 12.7229 71.4833 12.7229C75.9762 12.7229 78.3613 14.6737 79.2488 18.4893L75.0887 19.4647C74.7282 17.5713 73.6465 16.7967 71.4833 16.7967C68.5435 16.7967 67.4064 17.8581 67.4064 20.2393C67.4064 22.5918 68.5435 23.6245 71.4833 23.6245C73.8961 23.6245 74.6727 22.8213 75.0887 20.9565L79.2488 21.9319C78.3336 25.7762 75.9207 27.6983 71.4833 27.6983Z\" fill=\"#202E41\"/>\n\t\t\t<path d=\"M61.0768 11.6041H50.621V14.9893H60.1615V19.1205H50.621V23.1368H61.0768V27.4114H46.1836V7.32947H61.0768V11.6041Z\" fill=\"#0A0079\"/>\n\t\t\t<path d=\"M61.0768 11.6041H50.621V14.9893H60.1615V19.1205H50.621V23.1368H61.0768V27.4114H46.1836V7.32947H61.0768V11.6041Z\" fill=\"#202E41\"/>\n\t\t\t<path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M7.50689 4.31251C10.4771 4.31415 13.1988 5.37832 15.3125 7.14551C10.4262 7.4671 6.56249 11.5323 6.56249 16.5C6.56249 21.4677 10.4262 25.5329 15.3125 25.8545C13.1972 27.6231 10.4729 28.6875 7.5 28.6875L5.62191 28.6875C4.07003 28.6858 2.81251 27.4273 2.81251 25.875L2.8125 7.125C2.8125 5.5717 4.0717 4.31251 5.625 4.31251L7.49999 4.3125L7.50689 4.31251ZM27.1875 16.5C27.1875 10.2246 22.4446 5.05701 16.348 4.38621C20.0776 7.11502 22.5 11.5246 22.5 16.5C22.5 21.4754 20.0776 25.885 16.348 28.6138C22.4446 27.943 27.1875 22.7754 27.1875 16.5ZM7.50764 1.50001L15 1.50001C23.2843 1.50001 30 8.21573 30 16.5C30 24.7843 23.2843 31.5 15 31.5L7.5 31.5L5.625 31.5L4.21874 31.5C1.88879 31.5 -3.89726e-06 29.6112 -3.9991e-06 27.2813L-4.94163e-06 5.71876C-5.04348e-06 3.3888 1.88879 1.50001 4.21874 1.5L5.625 1.50001L7.49999 1.5L7.50764 1.50001ZM17.6367 9.9375L15.9375 9.9375C12.3131 9.9375 9.37499 12.8756 9.37499 16.5C9.37499 20.1244 12.3131 23.0625 15.9375 23.0625L17.6367 23.0625C17.7338 23.0625 17.8125 22.9838 17.8125 22.8867L17.8125 20.25L15.9375 20.25C13.8664 20.25 12.1875 18.5711 12.1875 16.5C12.1875 14.4289 13.8664 12.75 15.9375 12.75L17.8125 12.75L17.8125 10.1133C17.8125 10.0162 17.7338 9.9375 17.6367 9.9375ZM15.9375 15.5625L17.3437 15.5625L17.3437 17.4375L15.9375 17.4375C15.4197 17.4375 15 17.0178 15 16.5C15 15.9822 15.4197 15.5625 15.9375 15.5625Z\" fill=\"#0A0079\"/>\n\t\t\t<path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M7.50689 4.31251C10.4771 4.31415 13.1988 5.37832 15.3125 7.14551C10.4262 7.4671 6.56249 11.5323 6.56249 16.5C6.56249 21.4677 10.4262 25.5329 15.3125 25.8545C13.1972 27.6231 10.4729 28.6875 7.5 28.6875L5.62191 28.6875C4.07003 28.6858 2.81251 27.4273 2.81251 25.875L2.8125 7.125C2.8125 5.5717 4.0717 4.31251 5.625 4.31251L7.49999 4.3125L7.50689 4.31251ZM27.1875 16.5C27.1875 10.2246 22.4446 5.05701 16.348 4.38621C20.0776 7.11502 22.5 11.5246 22.5 16.5C22.5 21.4754 20.0776 25.885 16.348 28.6138C22.4446 27.943 27.1875 22.7754 27.1875 16.5ZM7.50764 1.50001L15 1.50001C23.2843 1.50001 30 8.21573 30 16.5C30 24.7843 23.2843 31.5 15 31.5L7.5 31.5L5.625 31.5L4.21874 31.5C1.88879 31.5 -3.89726e-06 29.6112 -3.9991e-06 27.2813L-4.94163e-06 5.71876C-5.04348e-06 3.3888 1.88879 1.50001 4.21874 1.5L5.625 1.50001L7.49999 1.5L7.50764 1.50001ZM17.6367 9.9375L15.9375 9.9375C12.3131 9.9375 9.37499 12.8756 9.37499 16.5C9.37499 20.1244 12.3131 23.0625 15.9375 23.0625L17.6367 23.0625C17.7338 23.0625 17.8125 22.9838 17.8125 22.8867L17.8125 20.25L15.9375 20.25C13.8664 20.25 12.1875 18.5711 12.1875 16.5C12.1875 14.4289 13.8664 12.75 15.9375 12.75L17.8125 12.75L17.8125 10.1133C17.8125 10.0162 17.7338 9.9375 17.6367 9.9375ZM15.9375 15.5625L17.3437 15.5625L17.3437 17.4375L15.9375 17.4375C15.4197 17.4375 15 17.0178 15 16.5C15 15.9822 15.4197 15.5625 15.9375 15.5625Z\" fill=\"#202E41\"/>\n\t\t</svg>\n\t);\n};","/**\n * Integration List Component\n * \n * Displays list of integrations matching the mockup design\n */\n\nimport React, { useState } from 'react';\nimport { __ } from '@wordpress/i18n';\nimport './IntegrationList.css';\nimport { EchoDashLogo } from './EchoDashLogo';\nimport type { Integration, EchoDashSettings } from '../types';\n\ninterface IntegrationListProps {\n\tintegrations: Integration[];\n\tsettings: EchoDashSettings;\n\tonIntegrationClick: (slug: string) => void;\n\tonAddTrigger: (slug: string) => void;\n}\n\nexport const IntegrationList: React.FC<IntegrationListProps> = ({\n\tintegrations,\n\tsettings,\n\tonIntegrationClick,\n\tonAddTrigger,\n}) => {\n\tconst [endpointUrl, setEndpointUrl] = useState(settings.endpoint || '');\n\tconst [isSaving, setIsSaving] = useState(false);\n\n\tconst handleEndpointChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\n\t\tsetEndpointUrl(e.target.value);\n\t};\n\n\tconst handleEndpointBlur = async (): Promise<void> => {\n\t\tif (endpointUrl !== settings.endpoint) {\n\t\t\tsetIsSaving(true);\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(window.ecdReactData?.apiUrl + 'settings', {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'X-WP-Nonce': window.ecdReactData?.nonce || '',\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tendpoint: endpointUrl\n\t\t\t\t\t}),\n\t\t\t\t});\n\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error('Failed to save endpoint');\n\t\t\t\t}\n\n\t\t\t\t// Settings are already saved on the server\n\t\t\t\t// Local state (endpointUrl) already reflects the change\n\t\t\t\t\t} catch {\n\t\t\t// Error will be shown to user via alert below\n\t\t\t\t// Revert to original value on error\n\t\t\t\tsetEndpointUrl(settings.endpoint || '');\n\t\t\t\talert(__('Failed to save endpoint URL. Please try again.', 'echodash'));\n\t\t\t} finally {\n\t\t\t\tsetIsSaving(false);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{/* Header with logo */}\n\t\t\t<div className=\"echodash-header\">\n\t\t\t\t<a \n\t\t\t\t\thref=\"https://echodash.com\" \n\t\t\t\t\ttarget=\"_blank\" \n\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\tclassName=\"echodash-header__logo-link\"\n\t\t\t\t>\n\t\t\t\t\t<EchoDashLogo className=\"echodash-header__logo\" />\n\t\t\t\t</a>\n\t\t\t\t<a \n\t\t\t\t\thref=\"https://echodash.com/docs/echodash-plugin\" \n\t\t\t\t\ttarget=\"_blank\" \n\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\tclassName=\"echodash-button echodash-header__docs-link\"\n\t\t\t\t>\n\t\t\t\t\t{__('Documentation', 'echodash')} →\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t\t{/* Welcome Section */}\n\t\t\t<div className=\"echodash-card echodash-welcome\">\n\t\t\t\t<div className=\"echodash-welcome__content\">\n\t\t\t\t\t<h2 className=\"echodash-welcome__title\">{__('Welcome to EchoDash', 'echodash')}</h2>\n\t\t\t\t\t<p className=\"echodash-welcome__description\">\n\t\t\t\t\t\t{__('EchoDash is a service for tracking real-time events on your WordPress site. It\\'s free and easy to use.', 'echodash')}\n\t\t\t\t\t</p>\n\t\t\t\t\t{!settings.isConnected ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<p className=\"echodash-welcome__instructions\">\n\t\t\t\t\t\t\t\t{__('To get started, create an endpoint in your EchoDash account by clicking the button below.', 'echodash')}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div className=\"echodash-welcome__connect-action\">\n\t\t\t\t\t\t\t\t<a \n\t\t\t\t\t\t\t\t\thref={settings.connectUrl || '#'} \n\t\t\t\t\t\t\t\t\tclassName=\"echodash-button echodash-button-primary echodash-connect-button\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{__('Connect to EchoDash', 'echodash')} &rarr;\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<p className=\"echodash-welcome__instructions\">\n\t\t\t\t\t\t\t\t{__('Your endpoint URL is configured below. You can update it anytime if needed.', 'echodash')}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div className=\"echodash-welcome__field-group\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"endpoint-url\" className=\"echodash-welcome__label\">\n\t\t\t\t\t\t\t\t\t{__('URL', 'echodash')}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\tid=\"endpoint-url\"\n\t\t\t\t\t\t\t\t\tclassName=\"regular-text echodash-welcome__input\"\n\t\t\t\t\t\t\t\t\tplaceholder={__('https://example.com/', 'echodash')}\n\t\t\t\t\t\t\t\t\tvalue={endpointUrl}\n\t\t\t\t\t\t\t\t\tonChange={handleEndpointChange}\n\t\t\t\t\t\t\t\t\tonBlur={handleEndpointBlur}\n\t\t\t\t\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{isSaving && <span className=\"echodash-saving-indicator\">{__('Saving...', 'echodash')}</span>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Video placeholder */}\n\t\t\t\t<div className=\"echodash-video-placeholder\">\n\t\t\t\t\t<div className=\"echodash-video-placeholder__play-button\">\n\t\t\t\t\t\t<span className=\"dashicons dashicons-controls-play echodash-video-placeholder__play-icon\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Integrations Section */}\n\t\t\t<div className=\"echodash-card echodash-integrations\">\n\t\t\t\t<h2 className=\"echodash-integrations__title\">{__('Integrations', 'echodash')}</h2>\n\t\t\t\t\n\t\t\t\t<div className=\"echodash-integrations__list\">\n\t\t\t\t\t{integrations.map((integration) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={integration.slug}\n\t\t\t\t\t\t\tclassName=\"echodash-integration-item\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{/* Icon */}\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclassName=\"echodash-integration-item__icon\"\n\t\t\t\t\t\t\t\tstyle={{ backgroundColor: integration.iconBackgroundColor }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img \n\t\t\t\t\t\t\t\tsrc={integration.icon}\n\t\t\t\t\t\t\t\talt={`${integration.name} logo`}\n\t\t\t\t\t\t\t\tclassName=\"echodash-integration-item__icon-image\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Name and trigger count */}\n\t\t\t\t\t\t\t<div className=\"echodash-integration-item__info\">\n\t\t\t\t\t\t\t\t<h3 className=\"echodash-integration-item__name\">\n\t\t\t\t\t\t\t\t\t{integration.name}\n\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t<span className=\"echodash-integration-item__trigger-count\">\n\t\t\t\t\t\t\t\t\t{integration.triggerCount} {integration.triggerCount === 1 ? __('Trigger', 'echodash') : __('Triggers', 'echodash')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Actions */}\n\t\t\t\t\t\t\t<div className=\"echodash-integration-item__actions\">\n\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\tclassName=\"echodash-button\"\n\t\t\t\t\t\t\t\t\tonClick={() => onIntegrationClick(integration.slug)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{__('Manage', 'echodash')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\tclassName=\"echodash-button\"\n\t\t\t\t\t\t\t\t\tonClick={() => onAddTrigger(integration.slug)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t+ {__('Add Trigger', 'echodash')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};","/**\n * Integration Detail Component\n * \n * Shows individual integration with triggers matching mockup\n */\n\nimport React, { useState } from 'react';\nimport { __ } from '@wordpress/i18n';\nimport './IntegrationDetail.css';\nimport { EchoDashLogo } from './EchoDashLogo';\nimport type { Integration, Trigger } from '../types';\n\ninterface IntegrationDetailProps {\n\tintegration: Integration;\n\ttriggers: Trigger[];\n\tonBack: () => void;\n\tonAddTrigger: () => void;\n\tonEditTrigger: (trigger: Trigger) => void;\n\tonDeleteTrigger: (trigger: Trigger) => void;\n\tonSendTest: (trigger: Trigger) => void;\n\tdeletingTrigger?: string | null;\n}\n\nexport const IntegrationDetail: React.FC<IntegrationDetailProps> = ({\n\tintegration,\n\ttriggers,\n\tonBack,\n\tonAddTrigger,\n\tonEditTrigger,\n\tonDeleteTrigger,\n\tonSendTest,\n\tdeletingTrigger,\n}) => {\n\tconst [sendingTest, setSendingTest] = useState<string | null>(null);\n\tconst [sentTest, setSentTest] = useState<string | null>(null);\n\n\tconst handleSendTest = async (trigger: Trigger): Promise<void> => {\n\t\tsetSendingTest(trigger.id);\n\t\tsetSentTest(null); // Clear any previous sent state\n\t\ttry {\n\t\t\tawait onSendTest(trigger);\n\t\t\t// Show \"Sent!\" state for 3 seconds\n\t\t\tsetSentTest(trigger.id);\n\t\t\tsetTimeout(() => setSentTest(null), 3000);\n\t\t} catch {\n\t\t\t// Error handling is done in App.tsx\n\t\t} finally {\n\t\t\tsetSendingTest(null);\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{/* Header with logo */}\n\t\t\t<div className=\"echodash-header\">\n\t\t\t\t<a \n\t\t\t\t\thref=\"https://echodash.com\" \n\t\t\t\t\ttarget=\"_blank\" \n\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\tclassName=\"echodash-header__logo-link\"\n\t\t\t\t>\n\t\t\t\t\t<EchoDashLogo className=\"echodash-header__logo\" />\n\t\t\t\t</a>\n\t\t\t\t<a \n\t\t\t\t\thref=\"https://echodash.com/docs/echodash-plugin\" \n\t\t\t\t\ttarget=\"_blank\" \n\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\tclassName=\"echodash-button echodash-header__docs-link\"\n\t\t\t\t>\n\t\t\t\t\t{__('Documentation', 'echodash')} →\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t\t{/* Breadcrumb navigation */}\n\t\t\t<div className=\"echodash-breadcrumb\">\n\t\t\t\t<button \n\t\t\t\t\tonClick={onBack}\n\t\t\t\t\tclassName=\"button-link echodash-breadcrumb__link\"\n\t\t\t\t>\n\t\t\t\t\t{__('Integrations', 'echodash')}\n\t\t\t\t</button>\n\t\t\t\t<span className=\"echodash-breadcrumb__separator\">/</span>\n\t\t\t\t<span>{integration.name}</span>\n\t\t\t</div>\n\n\t\t\t{/* Integration header */}\n\t\t\t<div className=\"echodash-card echodash-integration-header\">\n\t\t\t\t<div className=\"echodash-integration-header__content\">\n\t\t\t\t\t{/* Icon */}\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName=\"echodash-integration-header__icon echodash-integration-item__icon\"\n\t\t\t\t\t\tstyle={{ backgroundColor: integration.iconBackgroundColor }}\n\t\t\t\t\t>\n\t\t\t\t\t<img \n\t\t\t\t\t\tsrc={integration.icon}\n\t\t\t\t\t\talt={`${integration.name} logo`}\n\t\t\t\t\t\tclassName=\"echodash-integration-header__icon-image echodash-integration-item__icon-image\"\n\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"echodash-integration-header__info\">\n\t\t\t\t\t\t<h1 className=\"echodash-integration-header__title\">{integration.name}</h1>\n\t\t\t\t\t\t<p className=\"echodash-integration-header__description\">\n\t\t\t\t\t\t\t{integration.description || __('Configure triggers for this integration', 'echodash')}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button \n\t\t\t\t\t\tclassName=\"echodash-button echodash-integration-header__add-trigger\"\n\t\t\t\t\t\tonClick={onAddTrigger}\n\t\t\t\t\t>\n\t\t\t\t\t\t+ {__('Add Trigger', 'echodash')}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Triggers section */}\n\t\t\t<div className=\"echodash-card echodash-triggers\">\n\t\t\t\t<h2 className=\"echodash-triggers__title\">{__('Global Triggers', 'echodash')}</h2>\n\t\t\t\t\n\t\t\t\t{triggers.length === 0 ? (\n\t\t\t\t\t<div className=\"echodash-triggers__empty-state\">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclassName=\"echodash-triggers__empty-icon echodash-integration-item__icon\"\n\t\t\t\t\t\t\tstyle={{ backgroundColor: integration.iconBackgroundColor }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<img \n\t\t\t\t\t\t\tsrc={integration.icon}\n\t\t\t\t\t\t\talt={`${integration.name} logo`}\n\t\t\t\t\t\t\tclassName=\"echodash-triggers__empty-icon-image echodash-integration-item__icon-image\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h3 className=\"echodash-triggers__empty-title\">{__('Add your first %s trigger', 'echodash').replace('%s', integration.name)}</h3>\n\t\t\t\t\t\t<p className=\"echodash-triggers__empty-description\">\n\t\t\t\t\t\t\tGlobal triggers fire for all events of the selected type across your site.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\tclassName=\"echodash-button echodash-button-primary\"\n\t\t\t\t\t\t\tonClick={onAddTrigger}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t+ {__('Add Trigger', 'echodash')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"echodash-triggers__list\">\n\t\t\t\t\t\t{triggers.map((trigger, index) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={trigger.id || index}\n\t\t\t\t\t\t\t\tclassName=\"echodash-trigger-item echodash-integration-item\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{/* Drag handle */}\n\t\t\t\t\t\t\t\t<span \n\t\t\t\t\t\t\t\t\tclassName=\"dashicons dashicons-menu echodash-trigger-item__handle\" \n\t\t\t\t\t\t\t\t></span>\n\n\t\t\t\t\t\t\t\t{/* Trigger info */}\n\t\t\t\t\t\t\t\t<div className=\"echodash-trigger-item__info\">\n\t\t\t\t\t\t\t\t\t<div className=\"echodash-trigger-item__type\">{trigger.name}</div>\n\t\t\t\t\t\t\t\t\t<div className=\"echodash-trigger-item__name\">\n\t\t\t\t\t\t\t\t\t\t{trigger.description || trigger.trigger || __('Trigger', 'echodash')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* Actions */}\n\t\t\t\t\t\t\t\t<div className=\"echodash-trigger-item__actions\">\n\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\tclassName=\"echodash-button\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleSendTest(trigger)}\n\t\t\t\t\t\t\t\t\t\tdisabled={sendingTest === trigger.id || deletingTrigger === trigger.id}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{sendingTest === trigger.id ? (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"dashicons dashicons-bell ecd-ring\"></span>\n\t\t\t\t\t\t\t\t\t\t\t\tSending...\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t) : sentTest === trigger.id ? (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"dashicons dashicons-bell\"></span>\n\t\t\t\t\t\t\t\t\t\t\t\tSent!\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"dashicons dashicons-bell\"></span>\n\t\t\t\t\t\t\t\t\t\t\t\tSend Test\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\tclassName=\"echodash-button\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => onEditTrigger(trigger)}\n\t\t\t\t\t\t\t\t\t\tdisabled={deletingTrigger === trigger.id}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\tclassName=\"echodash-button\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tif (window.confirm(__('Are you sure you want to delete the \"%s\" trigger? This action cannot be undone.', 'echodash').replace('%s', trigger.name || __('Untitled', 'echodash')))) {\n\t\t\t\t\t\t\t\t\t\t\t\tonDeleteTrigger(trigger);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Delete trigger\"\n\t\t\t\t\t\t\t\t\t\tdisabled={deletingTrigger === trigger.id}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{deletingTrigger === trigger.id ? (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"dashicons dashicons-update-alt ecd-spinner\"></span>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"dashicons dashicons-trash\"></span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{/* Single-item triggers section */}\n\t\t\t{integration.singleItemTriggers && integration.singleItemTriggers.length > 0 && (\n\t\t\t\t<div className=\"echodash-card echodash-single-triggers\">\n\t\t\t\t\t<h2 className=\"echodash-triggers__title\">Single-Item Events</h2>\n\t\t\t\t\t<p className=\"echodash-single-triggers__description\">\n\t\t\t\t\t\tThese events are configured on individual posts, forms, products, or courses.\n\t\t\t\t\t</p>\n\t\t\t\t\t\n\t\t\t\t\t{integration.singleItemTriggers.map((triggerGroup, groupIndex) => (\n\t\t\t\t\t\t<div key={`${triggerGroup.trigger}-${groupIndex}`} className=\"echodash-single-trigger-group\">\n\t\t\t\t\t\t\t<h3 className=\"echodash-single-trigger-group__title\">\n\t\t\t\t\t\t\t\t{triggerGroup.name}\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<p className=\"echodash-single-trigger-group__description\">\n\t\t\t\t\t\t\t\t{triggerGroup.description}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div className=\"echodash-single-triggers__list\">\n\t\t\t\t\t\t\t\t{triggerGroup.items.map((item, itemIndex) => (\n\t\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t\tkey={`${item.post_id}-${itemIndex}`}\n\t\t\t\t\t\t\t\t\t\tclassName=\"echodash-single-trigger-item echodash-integration-item\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"echodash-single-trigger-item__info\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"echodash-single-trigger-item__title\">\n\t\t\t\t\t\t\t\t\t\t\t\t{item.event_name || __('Untitled Event', 'echodash')}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"echodash-single-trigger-item__post\">\n\t\t\t\t\t\t\t\t\t\t\t\t{__('Configured on:', 'echodash')} <strong>{item.post_title}</strong>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div className=\"echodash-single-trigger-item__actions\">\n\t\t\t\t\t\t\t\t\t\t\t<a \n\t\t\t\t\t\t\t\t\t\t\t\thref={item.edit_url}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"echodash-button\"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{__('Edit Item', 'echodash')} →\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n};","/**\n * Merge Tag Selector Component\n * \n * Dropdown component for selecting merge tags from available options\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport './MergeTagSelector.css';\nimport type { MergeTagGroup } from '../types';\n\ninterface MergeTagSelectorProps {\n\toptions: MergeTagGroup[];\n\tonSelect: (mergeTag: string) => void;\n\tisOpen: boolean;\n\tonClose: () => void;\n\tbuttonRef: React.RefObject<HTMLButtonElement>;\n}\n\nexport const MergeTagSelector: React.FC<MergeTagSelectorProps> = ({\n\toptions,\n\tonSelect,\n\tisOpen,\n\tonClose,\n\tbuttonRef\n}) => {\n\tconst dropdownRef = useRef<HTMLDivElement>(null);\n\tconst [position, setPosition] = useState({ top: 0, left: 0 });\n\tconst [isInModal, setIsInModal] = useState(false);\n\n\tuseEffect(() => {\n\t\tif (isOpen && buttonRef.current) {\n\t\t\tconst buttonRect = buttonRef.current.getBoundingClientRect();\n\t\t\t\n\t\t\t// Check if we're inside a modal\n\t\t\tconst modalParent = buttonRef.current.closest('.echodash-modal');\n\t\t\tsetIsInModal(!!modalParent);\n\t\t\t\n\t\t\tif (modalParent) {\n\t\t\t\t// For modal context, use fixed positioning\n\t\t\t\tlet top = buttonRect.bottom + 2;\n\t\t\t\tlet left = buttonRect.left;\n\t\t\t\t\n\t\t\t\t// Get dropdown dimensions after render\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (dropdownRef.current) {\n\t\t\t\t\t\tconst dropdownRect = dropdownRef.current.getBoundingClientRect();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Adjust if dropdown would go off screen to the right\n\t\t\t\t\t\tif (left + dropdownRect.width > window.innerWidth - 20) {\n\t\t\t\t\t\t\tleft = buttonRect.right - dropdownRect.width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Adjust if dropdown would go off screen to the bottom\n\t\t\t\t\t\tif (top + dropdownRect.height > window.innerHeight - 20) {\n\t\t\t\t\t\t\ttop = buttonRect.top - dropdownRect.height - 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tsetPosition({ top, left });\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t\t\n\t\t\t\tsetPosition({ top, left });\n\t\t\t} else {\n\t\t\t\t// For non-modal context, use absolute positioning\n\t\t\t\tconst top = buttonRect.bottom + window.scrollY + 2;\n\t\t\t\tconst left = buttonRect.left + window.scrollX;\n\t\t\t\t\n\t\t\t\tsetPosition({ top, left });\n\t\t\t}\n\t\t}\n\t}, [isOpen, buttonRef]);\n\n\tuseEffect(() => {\n\t\tconst handleClickOutside = (event: MouseEvent): void => {\n\t\t\tif (dropdownRef.current && !dropdownRef.current.contains(event.target as Node) &&\n\t\t\t\tbuttonRef.current && !buttonRef.current.contains(event.target as Node)) {\n\t\t\t\tonClose();\n\t\t\t}\n\t\t};\n\n\t\tif (isOpen) {\n\t\t\tdocument.addEventListener('mousedown', handleClickOutside);\n\t\t\treturn () => document.removeEventListener('mousedown', handleClickOutside);\n\t\t}\n\t}, [isOpen, onClose, buttonRef]);\n\n\tconst handleSelect = (groupType: string, meta: string): void => {\n\t\tconst mergeTag = `{${groupType}:${meta}}`;\n\t\tonSelect(mergeTag);\n\t\tonClose();\n\t};\n\n\tif (!isOpen) return null;\n\n\treturn (\n\t\t<div\n\t\t\tref={dropdownRef}\n\t\t\tclassName={`echodash-merge-dropdown ${isInModal ? 'echodash-merge-dropdown--in-modal' : ''}`}\n\t\t\tstyle={{\n\t\t\t\tposition: isInModal ? 'fixed' : 'absolute',\n\t\t\t\ttop: position.top,\n\t\t\t\tleft: position.left\n\t\t\t}}\n\t\t>\n\t\t\t{options.map((group, groupIndex) => (\n\t\t\t\t<div \n\t\t\t\t\tkey={groupIndex} \n\t\t\t\t\tclassName=\"echodash-merge-dropdown__group\"\n\t\t\t\t>\n\t\t\t\t\t{/* Group Header */}\n\t\t\t\t\t<div className=\"echodash-merge-dropdown__group-header\">\n\t\t\t\t\t\t{group.name}\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t{/* Group Options */}\n\t\t\t\t\t{group.options.map((option, optionIndex) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\tkey={optionIndex}\n\t\t\t\t\tonClick={() => handleSelect(group.type, option.meta)}\n\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\tif (e.key === 'Enter' || e.key === ' ') {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\thandleSelect(group.type, option.meta);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\ttabIndex={0}\n\t\t\t\t\trole=\"button\"\n\t\t\t\t\taria-label={`Select merge tag ${group.type}:${option.meta}`}\n\t\t\t\t\tclassName=\"echodash-merge-dropdown__option\"\n\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"echodash-merge-dropdown__option-tag\">\n\t\t\t\t\t\t\t\t{`{${group.type}:${option.meta}}`}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"echodash-merge-dropdown__option-placeholder\">\n\t\t\t\t\t\t\t\t{option.placeholder}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"echodash-merge-dropdown__option-preview\">\n\t\t\t\t\t\t\t\tPreview: {String(option.preview)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t))}\n\t\t\t\n\t\t\t{options.length === 0 && (\n\t\t\t\t<div className=\"echodash-merge-dropdown__empty\">\n\t\t\t\t\tNo merge tags available\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};","/**\n * Trigger Modal Component\n * \n * Modal for adding/editing triggers matching the mockup design\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { __ } from '@wordpress/i18n';\nimport { MergeTagSelector } from './MergeTagSelector';\nimport './TriggerModal.css';\nimport type { Integration, KeyValuePair, Trigger, TriggerMapping, MergeTagGroup } from '../types';\n\n// Interface for the data passed to onSave\ninterface TriggerSaveData {\n\ttrigger: string;\n\tname: string;\n\tmappings: TriggerMapping[];\n\tsendTest?: boolean;\n}\n\ninterface TriggerModalProps {\n\tisOpen: boolean;\n\tonClose: () => void;\n\tonSave: (data: TriggerSaveData) => void;\n\tonSendTest?: (data: Trigger) => void;\n\tintegration: Integration;\n\teditingTrigger?: Trigger;\n\tsavingTrigger?: boolean;\n}\n\nexport const TriggerModal: React.FC<TriggerModalProps> = ({\n\tisOpen,\n\tonClose,\n\tonSave,\n\tonSendTest,\n\tintegration,\n\teditingTrigger,\n\tsavingTrigger = false,\n}) => {\n\tconst availableTriggers = integration.availableTriggers || [\n\t\t{ id: 'form_submitted', name: 'Form Submitted', description: 'Triggered each time a form is submitted.' }\n\t];\n\n\t// Initialize state based on whether we're editing or creating\n\tconst getInitialTrigger = (): string => {\n\t\tif (editingTrigger) {\n\t\t\treturn editingTrigger.trigger || editingTrigger.id || '';\n\t\t}\n\t\treturn availableTriggers[0]?.id || '';\n\t};\n\n\tconst getInitialEventName = (): string => {\n\t\tif (editingTrigger) {\n\t\t\treturn editingTrigger.name || editingTrigger.event_name || '';\n\t\t}\n\t\tconst firstTrigger = availableTriggers[0];\n\t\treturn firstTrigger?.defaultEvent?.name || firstTrigger?.name || '';\n\t};\n\n\t// Initialize key-value pairs from editing data or default event mappings\n\tconst getInitialKeyValuePairs = (): KeyValuePair[] => {\n\t\tif (editingTrigger?.mappings && Array.isArray(editingTrigger.mappings)) {\n\t\t\t// Use existing mappings from editing trigger\n\t\t\tconst pairs = editingTrigger.mappings.map((mapping: TriggerMapping) => ({\n\t\t\t\tkey: mapping.key || '',\n\t\t\t\tvalue: mapping.value || ''\n\t\t\t}));\n\t\t\t// Add empty row at the end if not already present\n\t\t\tif (pairs.length === 0 || (pairs[pairs.length - 1].key !== '' || pairs[pairs.length - 1].value !== '')) {\n\t\t\t\tpairs.push({ key: '', value: '' });\n\t\t\t}\n\t\t\treturn pairs;\n\t\t} else if (!editingTrigger) {\n\t\t\t// For new triggers, use default event mappings if available\n\t\t\tconst firstTrigger = availableTriggers[0];\n\t\t\tif (firstTrigger?.defaultEvent?.mappings && typeof firstTrigger.defaultEvent.mappings === 'object') {\n\t\t\t\tconst pairs = Object.entries(firstTrigger.defaultEvent.mappings).map(([key, value]) => ({\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue: String(value)\n\t\t\t\t}));\n\t\t\t\tpairs.push({ key: '', value: '' });\n\t\t\t\treturn pairs;\n\t\t\t}\n\t\t}\n\t\t// Fallback to default pairs\n\t\treturn [\n\t\t\t{ key: 'user_name', value: '{user_name}' },\n\t\t\t{ key: 'user_id', value: '{user_id}' },\n\t\t\t{ key: '', value: '' }\n\t\t];\n\t};\n\n\tconst [selectedTrigger, setSelectedTrigger] = useState(getInitialTrigger());\n\tconst [eventName, setEventName] = useState(getInitialEventName());\n\tconst [keyValuePairs, setKeyValuePairs] = useState<KeyValuePair[]>(getInitialKeyValuePairs());\n\tconst [openDropdownIndex, setOpenDropdownIndex] = useState<{type: 'name' | 'value', index: number} | null>(null);\n\tconst [sendingTest, setSendingTest] = useState(false);\n\tconst [sentTest, setSentTest] = useState(false);\n\t\n\t// Refs for merge tag buttons\n\tconst nameButtonRef = useRef<HTMLButtonElement>(null);\n\tconst valueButtonRefs = useRef<Array<HTMLButtonElement | null>>([]);\n\n\t// Initialize refs array when keyValuePairs change\n\tuseEffect(() => {\n\t\tvalueButtonRefs.current = valueButtonRefs.current.slice(0, keyValuePairs.length);\n\t}, [keyValuePairs.length]);\n\n\tif (!isOpen) return null;\n\n\tconst handleTriggerChange = (triggerId: string): void => {\n\t\tsetSelectedTrigger(triggerId);\n\t\tconst trigger = availableTriggers.find(t => t.id === triggerId);\n\t\tif (trigger) {\n\t\t\tsetEventName(trigger.defaultEvent?.name || trigger.name);\n\t\t\t\n\t\t\t// Update key-value pairs based on the selected trigger's defaultEvent.mappings\n\t\t\tif (trigger.defaultEvent?.mappings && typeof trigger.defaultEvent.mappings === 'object') {\n\t\t\t\tconst pairs = Object.entries(trigger.defaultEvent.mappings).map(([key, value]) => ({\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue: String(value)\n\t\t\t\t}));\n\t\t\t\tpairs.push({ key: '', value: '' });\n\t\t\t\tsetKeyValuePairs(pairs);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst updateKeyValuePair = (index: number, field: 'key' | 'value', value: string): void => {\n\t\tconst newPairs = [...keyValuePairs];\n\t\tnewPairs[index][field] = value;\n\t\tsetKeyValuePairs(newPairs);\n\t};\n\n\tconst addKeyValuePair = (): void => {\n\t\tsetKeyValuePairs([...keyValuePairs, { key: '', value: '' }]);\n\t};\n\n\tconst removeKeyValuePair = (index: number): void => {\n\t\tif (keyValuePairs.length > 1) {\n\t\t\tconst newPairs = keyValuePairs.filter((_, i) => i !== index);\n\t\t\tsetKeyValuePairs(newPairs);\n\t\t}\n\t};\n\n\tconst handleMergeTagSelect = (mergeTag: string): void => {\n\t\tif (openDropdownIndex?.type === 'name') {\n\t\t\tsetEventName((prev: string) => prev + mergeTag);\n\t\t} else if (openDropdownIndex?.type === 'value') {\n\t\t\tconst index = openDropdownIndex.index;\n\t\t\tupdateKeyValuePair(index, 'value', keyValuePairs[index].value + mergeTag);\n\t\t}\n\t\tsetOpenDropdownIndex(null);\n\t};\n\n\t// Get current trigger options for merge tag selector\n\tconst getCurrentTriggerOptions = (): MergeTagGroup[] => {\n\t\tconst trigger = availableTriggers.find(t => t.id === selectedTrigger);\n\t\treturn trigger?.options || [];\n\t};\n\n\tconst handleSave = (): void => {\n\t\tconst data = {\n\t\t\ttrigger: selectedTrigger,\n\t\t\tname: eventName,\n\t\t\tmappings: keyValuePairs.filter(pair => pair.key && pair.value),\n\t\t};\n\t\tonSave(data);\n\t};\n\n\tconst handleSendTest = async (): Promise<void> => {\n\t\tif (!onSendTest) return;\n\t\t\n\t\tsetSendingTest(true);\n\t\tsetSentTest(false); // Clear any previous sent state\n\t\ttry {\n\t\t\tconst data = {\n\t\t\t\ttrigger: selectedTrigger,\n\t\t\t\tname: eventName,\n\t\t\t\tmappings: keyValuePairs.filter(pair => pair.key && pair.value),\n\t\t\t};\n\t\t\tawait onSendTest(data as Trigger);\n\t\t\t// Show \"Sent!\" state for 3 seconds\n\t\t\tsetSentTest(true);\n\t\t\tsetTimeout(() => setSentTest(false), 3000);\n\t\t} catch {\n\t\t\t// Error handling is done in App.tsx, just reset loading state\n\t\t\t// Error handling is done in App.tsx\n\t\t} finally {\n\t\t\tsetSendingTest(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"echodash-modal-overlay\">\n\t\t\t<div className=\"echodash-modal\">\n\t\t\t\t{/* Header */}\n\t\t\t\t<div className=\"echodash-modal__header\">\n\t\t\t\t\t<div className=\"echodash-modal__header-content\">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclassName=\"echodash-modal__header-icon echodash-integration-item__icon\"\n\t\t\t\t\t\t\tstyle={{ backgroundColor: integration.iconBackgroundColor || '#ff6900' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{integration.icon ? (\n\t\t\t\t\t\t\t\t<img \n\t\t\t\t\t\t\t\t\tsrc={integration.icon}\n\t\t\t\t\t\t\t\t\talt={`${integration.name} logo`}\n\t\t\t\t\t\t\t\t\tclassName=\"echodash-modal__header-icon-image\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<span \n\t\t\t\t\t\t\t\t\tclassName={`dashicons dashicons-${integration.slug === 'gravity-forms' ? 'feedback' : 'admin-plugins'} echodash-modal__header-icon-dashicon`} \n\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"echodash-modal__header-text\">\n\t\t\t\t\t\t\t<h2 className=\"echodash-modal__title\">\n\t\t\t\t\t\t\t\t{editingTrigger ? 'Edit Trigger' : 'Add Trigger'}\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t<p className=\"echodash-modal__subtitle\">\n\t\t\t\t\t\t\t\t{editingTrigger \n\t\t\t\t\t\t\t\t\t? __('Edit trigger for %s', 'echodash').replace('%s', integration.name) \n\t\t\t\t\t\t\t\t\t: __('Create a trigger for %s', 'echodash').replace('%s', integration.name)}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button \n\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\tclassName=\"echodash-modal__close\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"dashicons dashicons-no-alt\"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Content */}\n\t\t\t\t<div className=\"echodash-modal__content\">\n\t\t\t\t\t{/* Trigger Type */}\n\t\t\t\t\t<div className=\"echodash-form-group\">\n\t\t\t\t\t\t<label className=\"echodash-form-group__label\">\n\t\t\t\t\t\t\t{__('Trigger', 'echodash')}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<select \n\t\t\t\t\t\t\tvalue={selectedTrigger}\n\t\t\t\t\t\t\tonChange={(e) => handleTriggerChange(e.target.value)}\n\t\t\t\t\t\t\tclassName=\"echodash-form-group__select\"\n\t\t\t\t\t\t\tdisabled={!!editingTrigger || savingTrigger}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{availableTriggers.map(trigger => (\n\t\t\t\t\t\t\t\t<option key={trigger.id} value={trigger.id}>\n\t\t\t\t\t\t\t\t\t{trigger.name}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t{selectedTrigger && (\n\t\t\t\t\t\t\t<div className=\"echodash-info-box\">\n\t\t\t\t\t\t\t\t<span \n\t\t\t\t\t\t\t\t\tclassName=\"dashicons dashicons-info-outline echodash-info-box__icon\" \n\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t\t<span className=\"echodash-info-box__text\">\n\t\t\t\t\t\t\t\t\t{availableTriggers.find(t => t.id === selectedTrigger)?.description || 'No description available.'}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<hr />\n\n\t\t\t\t\t{/* Payload */}\n\t\t\t\t\t<div className=\"echodash-payload\">\n\t\t\t\t\t\t<h3 className=\"echodash-payload__title\">Payload</h3>\n\n\t\t\t\t\t\t{/* Event Name */}\n\t\t\t\t\t\t<div className=\"echodash-event-name\">\n\t\t\t\t\t\t\t<div className=\"echodash-input-wrapper echodash-input-wrapper--name\">\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={eventName}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEventName(e.target.value)}\n\t\t\t\t\t\t\t\t\tclassName=\"echodash-event-name__input\"\n\t\t\t\t\t\t\t\t\tdisabled={savingTrigger}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\tref={nameButtonRef}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => setOpenDropdownIndex({ type: 'name', index: -1 })}\n\t\t\t\t\t\t\t\t\tclassName=\"echodash-merge-tag-button echodash-merge-tag-button--inline\"\n\t\t\t\t\t\t\t\t\tdisabled={savingTrigger}\n\t\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Key-Value Pairs */}\n\t\t\t\t\t\t{keyValuePairs.map((pair, index) => (\n\t\t\t\t\t\t\t<div key={index} className=\"echodash-key-value-pair\">\n\t\t\t\t\t\t\t\t<div className=\"echodash-key-value-pair__field echodash-key-value-pair__field--key\">\n\t\t\t\t\t\t\t\t\t<div className=\"echodash-input-wrapper echodash-input-wrapper--key\">\n\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={pair.key}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => updateKeyValuePair(index, 'key', e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"echodash-key-value-pair__input\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={savingTrigger}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"echodash-key-value-pair__field echodash-key-value-pair__field--value\">\n\t\t\t\t\t\t\t\t\t<div className=\"echodash-input-wrapper echodash-input-wrapper--value\">\n\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={pair.value}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => updateKeyValuePair(index, 'value', e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"echodash-key-value-pair__input\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={savingTrigger}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\t\tref={(el) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (valueButtonRefs.current) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueButtonRefs.current[index] = el;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setOpenDropdownIndex({ type: 'value', index })}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"echodash-merge-tag-button echodash-merge-tag-button--inline\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={savingTrigger}\n\t\t\t\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"echodash-key-value-pair__actions\">\n\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tonClick={addKeyValuePair}\n\t\t\t\t\t\t\t\t\t\tclassName=\"echodash-key-value-pair__action-button\"\n\t\t\t\t\t\t\t\t\t\tdisabled={savingTrigger}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span className=\"dashicons dashicons-plus-alt2\"></span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{keyValuePairs.length > 1 && (\n\t\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeKeyValuePair(index)}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"echodash-key-value-pair__action-button\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={savingTrigger}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"dashicons dashicons-minus\"></span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{/* Merge Tag Selector */}\n\t\t\t\t{openDropdownIndex && (\n\t\t\t\t\t<MergeTagSelector\n\t\t\t\t\t\toptions={getCurrentTriggerOptions()}\n\t\t\t\t\t\tonSelect={handleMergeTagSelect}\n\t\t\t\t\t\tisOpen={true}\n\t\t\t\t\t\tonClose={() => setOpenDropdownIndex(null)}\n\t\t\t\t\t\tbuttonRef={\n\t\t\t\t\t\t\topenDropdownIndex.type === 'name' \n\t\t\t\t\t\t\t\t? nameButtonRef \n\t\t\t\t\t\t\t\t: { current: valueButtonRefs.current[openDropdownIndex.index] }\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\n\t\t\t\t{/* Footer */}\n\t\t\t\t<div className=\"echodash-modal__footer\">\n\t\t\t\t\t<button \n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName=\"echodash-button echodash-send-test-button\"\n\t\t\t\t\t\tonClick={handleSendTest}\n\t\t\t\t\t\tdisabled={sendingTest || !onSendTest || !selectedTrigger || savingTrigger}\n\t\t\t\t\t>\n\t\t\t\t\t\t{sendingTest ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"dashicons dashicons-bell ecd-ring\"></span>\n\t\t\t\t\t\t\t\tSending...\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : sentTest ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"dashicons dashicons-bell\"></span>\n\t\t\t\t\t\t\t\tSent!\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"dashicons dashicons-bell\"></span>\n\t\t\t\t\t\t\t\tSend Test\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</button>\n\t\t\t\t\t<div className=\"echodash-modal__footer-actions\">\n\t\t\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\tclassName=\"echodash-button\"\n\t\t\t\t\t\tdisabled={savingTrigger}\n\t\t\t\t\t>\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</button>\n\t\t\t\t\t<button \n\t\t\t\t\t\tonClick={handleSave}\n\t\t\t\t\t\tclassName=\"echodash-button echodash-button-primary\"\n\t\t\t\t\t\tdisabled={!selectedTrigger || savingTrigger}\n\t\t\t\t\t>\n\t\t\t\t\t\t{savingTrigger ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"dashicons dashicons-update-alt ecd-spinner\"></span>\n\t\t\t\t\t\t\t\tSaving...\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\teditingTrigger ? 'Update Trigger' : 'Add Trigger'\n\t\t\t\t\t\t)}\n\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};","/**\n * EchoDash Main App Component\n * \n * Simple React app for EchoDash settings matching mockups\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { IntegrationList } from './components/IntegrationList';\nimport { IntegrationDetail } from './components/IntegrationDetail';\nimport { TriggerModal } from './components/TriggerModal';\nimport type { \n\tIntegration, \n\tTrigger, \n\tSingleItemTriggerGroup, \n\tEchoDashSettings,\n\tTriggerMapping\n} from './types';\n\n// Interface for trigger data when saving\ninterface TriggerFormData {\n\ttrigger: string;\n\tname: string;\n\tmappings: TriggerMapping[];\n\tsendTest?: boolean;\n}\n\n// Simple logger utility for development\nconst logger = {\n\terror: (message: string, data?: unknown): void => {\n\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(message, data);\n\t\t}\n\t}\n};\n\n// Get global data from PHP\ndeclare global {\n\tinterface Window {\n\t\tecdReactData: {\n\t\t\tsettings: EchoDashSettings;\n\t\t\tintegrations: Integration[];\n\t\t\tuserTriggers: Record<string, {\n\t\t\t\tglobal: Trigger[];\n\t\t\t\tsingleItem: SingleItemTriggerGroup[];\n\t\t\t}>;\n\t\t\tnonce: string;\n\t\t\tapiUrl: string;\n\t\t\ti18n: Record<string, string>;\n\t\t};\n\t}\n}\n\nexport const App: React.FC = () => {\n\tconst [currentView, setCurrentView] = useState<'list' | 'detail'>('list');\n\tconst [selectedIntegration, setSelectedIntegration] = useState<string | null>(null);\n\tconst [showTriggerModal, setShowTriggerModal] = useState(false);\n\tconst [editingTrigger, setEditingTrigger] = useState<Trigger | null>(null);\n\tconst [userTriggers, setUserTriggers] = useState(window.ecdReactData?.userTriggers || {});\n\tconst [integrations, setIntegrations] = useState(window.ecdReactData?.integrations || []);\n\tconst [savingTrigger, setSavingTrigger] = useState(false);\n\tconst [deletingTrigger, setDeletingTrigger] = useState<string | null>(null);\n\n\tconst data = window.ecdReactData || {\n\t\tsettings: {},\n\t\tintegrations: [],\n\t\tuserTriggers: {},\n\t\tnonce: '',\n\t\tapiUrl: '',\n\t\ti18n: {}\n\t};\n\n\t// Update URL when navigation changes\n\tuseEffect(() => {\n\t\tif (currentView === 'list') {\n\t\t\twindow.history.pushState({}, '', window.location.pathname + window.location.search);\n\t\t} else if (currentView === 'detail' && selectedIntegration) {\n\t\t\tconst url = new URL(window.location.href);\n\t\t\turl.hash = `/integration/${selectedIntegration}`;\n\t\t\twindow.history.pushState({}, '', url.toString());\n\t\t}\n\t}, [currentView, selectedIntegration]);\n\n\t// Handle browser back/forward buttons\n\tuseEffect(() => {\n\t\tconst handlePopState = (): void => {\n\t\t\tconst hash = window.location.hash;\n\t\t\tif (hash.startsWith('#/integration/')) {\n\t\t\t\tconst slug = hash.replace('#/integration/', '');\n\t\t\t\tsetSelectedIntegration(slug);\n\t\t\t\tsetCurrentView('detail');\n\t\t\t} else {\n\t\t\t\tsetCurrentView('list');\n\t\t\t\tsetSelectedIntegration(null);\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener('popstate', handlePopState);\n\t\t\n\t\t// Check initial URL\n\t\thandlePopState();\n\n\t\treturn () => window.removeEventListener('popstate', handlePopState);\n\t}, []);\n\n\t// Handle EchoDash callback on page load\n\tuseEffect(() => {\n\t\tconst urlParams = new URLSearchParams(window.location.search);\n\t\tconst endpointUrl = urlParams.get('endpoint_url');\n\t\tconst wpnonce = urlParams.get('wpnonce');\n\n\t\t// If we have callback parameters, the user just returned from EchoDash\n\t\tif (endpointUrl && wpnonce) {\n\t\t\t// The backend should have already processed this via save_echodash_callback()\n\t\t\t// Just need to refresh the page data or reload to show the new state\n\t\t\twindow.location.reload();\n\t\t}\n\t}, []);\n\n\tconst handleIntegrationClick = (slug: string): void => {\n\t\tsetSelectedIntegration(slug);\n\t\tsetCurrentView('detail');\n\t};\n\n\tconst handleBackToList = (): void => {\n\t\tsetCurrentView('list');\n\t\tsetSelectedIntegration(null);\n\t};\n\n\tconst handleAddTrigger = (): void => {\n\t\tsetEditingTrigger(null); // Clear any editing state\n\t\tsetShowTriggerModal(true);\n\t};\n\n\tconst handleAddTriggerFromList = (slug: string): void => {\n\t\tsetSelectedIntegration(slug);\n\t\tsetCurrentView('detail');\n\t\t// Small delay to ensure the view has changed before opening modal\n\t\tsetTimeout(() => {\n\t\t\tsetEditingTrigger(null);\n\t\t\tsetShowTriggerModal(true);\n\t\t}, 50);\n\t};\n\n\tconst handleEditTrigger = (trigger: Trigger): void => {\n\t\tsetEditingTrigger(trigger);\n\t\tsetShowTriggerModal(true);\n\t};\n\n\tconst handleSendTest = async (trigger: Trigger): Promise<void> => {\n\t\ttry {\n\t\t\t// First, generate a preview to process merge tags with real test data\n\t\t\tconst eventConfig = {\n\t\t\t\tname: trigger.name || trigger.event_name,\n\t\t\t\tmappings: trigger.mappings || []\n\t\t\t};\n\n\t\t\tconst previewResponse = await fetch(`${data.apiUrl}preview`, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'X-WP-Nonce': data.nonce,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\teventConfig: eventConfig,\n\t\t\t\t\tintegrationSlug: selectedIntegration,\n\t\t\t\t\ttriggerId: trigger.trigger\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\tif (!previewResponse.ok) {\n\t\t\t\tthrow new Error('Failed to generate event preview');\n\t\t\t}\n\n\t\t\tconst previewData = await previewResponse.json();\n\n\t\t\t// Now send the test event with processed data\n\t\t\tconst eventData = {\n\t\t\t\tname: previewData.eventName,\n\t\t\t\tproperties: previewData.processedData\n\t\t\t};\n\n\t\t\tconst testResponse = await fetch(`${data.apiUrl}test-event`, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'X-WP-Nonce': data.nonce,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\teventData: eventData,\n\t\t\t\t\tintegrationSlug: selectedIntegration,\n\t\t\t\t\ttrigger: trigger.trigger\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\tif (testResponse.ok) {\n\t\t\t\t// Success handled by UI state in IntegrationDetail component\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tconst errorData = await testResponse.json();\n\t\t\t\tlogger.error('Failed to send test event:', errorData);\n\t\t\t\tthrow new Error(errorData.message || 'Failed to send test event. Please try again.');\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tlogger.error('Error sending test event:', error);\n\t\t\tconst errorMessage = error instanceof Error ? error.message : 'Error sending test event. Please check your connection and try again.';\n\t\t\talert(errorMessage);\n\t\t}\n\t};\n\n\tconst handleDeleteTrigger = async (trigger: Trigger): Promise<void> => {\n\t\tsetDeletingTrigger(trigger.id);\n\t\ttry {\n\t\t\tconst url = `${data.apiUrl}integrations/${selectedIntegration}/triggers/${trigger.id}`;\n\t\t\t\n\t\t\tconst response = await fetch(url, {\n\t\t\t\tmethod: 'DELETE',\n\t\t\t\theaders: {\n\t\t\t\t\t'X-WP-Nonce': data.nonce,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tif (response.ok) {\n\t\t\t\t// Update local state - remove the deleted trigger\n\t\t\t\tif (selectedIntegration) {\n\t\t\t\t\tconst integrationTriggers = userTriggers[selectedIntegration]?.global || [];\n\t\t\t\t\tconst updatedTriggers = integrationTriggers.filter(t => t.id !== trigger.id);\n\t\t\t\t\t\n\t\t\t\t\tsetUserTriggers({\n\t\t\t\t\t\t...userTriggers,\n\t\t\t\t\t\t[selectedIntegration]: {\n\t\t\t\t\t\t\tglobal: updatedTriggers,\n\t\t\t\t\t\t\tsingleItem: userTriggers[selectedIntegration]?.singleItem || []\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Update integration trigger count\n\t\t\t\t\tsetIntegrations(prev => prev.map(integration => {\n\t\t\t\t\t\tif (integration.slug === selectedIntegration) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...integration,\n\t\t\t\t\t\t\t\ttriggerCount: Math.max(0, integration.triggerCount - 1),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn integration;\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst errorData = await response.json();\n\t\t\t\tlogger.error('Failed to delete trigger:', errorData);\n\t\t\t\tthrow new Error(errorData.message || 'Failed to delete trigger. Please try again.');\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tlogger.error('Error deleting trigger:', error);\n\t\t\tconst errorMessage = error instanceof Error ? error.message : 'Error deleting trigger. Please check your connection and try again.';\n\t\t\talert(errorMessage);\n\t\t} finally {\n\t\t\tsetDeletingTrigger(null);\n\t\t}\n\t};\n\n\tconst handleSaveTrigger = async (triggerData: TriggerFormData): Promise<void> => {\n\t\tsetSavingTrigger(true);\n\t\ttry {\n\t\t\tconst isEditing = editingTrigger !== null;\n\t\t\tconst url = isEditing\n\t\t\t\t? `${data.apiUrl}integrations/${selectedIntegration}/triggers/${editingTrigger.id}`\n\t\t\t\t: `${data.apiUrl}integrations/${selectedIntegration}/triggers`;\n\t\t\t\n\t\t\tconst response = await fetch(url, {\n\t\t\t\tmethod: isEditing ? 'PUT' : 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'X-WP-Nonce': data.nonce,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\ttrigger: triggerData.trigger,\n\t\t\t\t\tname: triggerData.name,\n\t\t\t\t\tevent_name: triggerData.name,\n\t\t\t\t\tmappings: triggerData.mappings,\n\t\t\t\t\tsend_test: triggerData.sendTest\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\tif (response.ok) {\n\t\t\t\tconst result = await response.json();\n\t\t\t\t\n\t\t\t\t// Update local state\n\t\t\t\tif (selectedIntegration) {\n\t\t\t\t\tconst integrationTriggers = userTriggers[selectedIntegration]?.global || [];\n\t\t\t\t\t\n\t\t\t\t\t// Get the description from the integration's available triggers\n\t\t\t\t\tconst selectedIntegrationData = integrations.find(i => i.slug === selectedIntegration);\n\t\t\t\t\tconst availableTrigger = selectedIntegrationData?.availableTriggers?.find(\n\t\t\t\t\t\tt => t.id === triggerData.trigger\n\t\t\t\t\t);\n\t\t\t\t\tconst triggerDescription = availableTrigger?.description || '';\n\t\t\t\t\t\n\t\t\t\t\tif (isEditing) {\n\t\t\t\t\t\t// Update existing trigger\n\t\t\t\t\t\tconst updatedTriggers = integrationTriggers.map(t => \n\t\t\t\t\t\t\tt.id === editingTrigger.id \n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...t,\n\t\t\t\t\t\t\t\t\tid: result.id || editingTrigger.id,\n\t\t\t\t\t\t\t\t\tname: triggerData.name,\n\t\t\t\t\t\t\t\t\ttrigger: triggerData.trigger,\n\t\t\t\t\t\t\t\t\tevent_name: triggerData.name,\n\t\t\t\t\t\t\t\t\tmappings: triggerData.mappings,\n\t\t\t\t\t\t\t\t\tdescription: triggerDescription,\n\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t: t\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetUserTriggers({\n\t\t\t\t\t\t\t...userTriggers,\n\t\t\t\t\t\t\t[selectedIntegration]: {\n\t\t\t\t\t\t\t\tglobal: updatedTriggers,\n\t\t\t\t\t\t\t\tsingleItem: userTriggers[selectedIntegration]?.singleItem || []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Add new trigger\n\t\t\t\t\t\tconst newTrigger = {\n\t\t\t\t\t\t\tid: result.id || Date.now().toString(),\n\t\t\t\t\t\t\tname: triggerData.name,\n\t\t\t\t\t\t\ttrigger: triggerData.trigger,\n\t\t\t\t\t\t\tevent_name: triggerData.name,\n\t\t\t\t\t\t\tmappings: triggerData.mappings,\n\t\t\t\t\t\t\tdescription: triggerDescription,\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tsetUserTriggers({\n\t\t\t\t\t\t...userTriggers,\n\t\t\t\t\t\t[selectedIntegration]: {\n\t\t\t\t\t\t\tglobal: [...integrationTriggers, newTrigger],\n\t\t\t\t\t\t\tsingleItem: userTriggers[selectedIntegration]?.singleItem || []\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t\t// Update integration trigger count for new triggers only\n\t\t\t\t\t\tsetIntegrations(prev => prev.map(integration => {\n\t\t\t\t\t\t\tif (integration.slug === selectedIntegration) {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t...integration,\n\t\t\t\t\t\t\t\t\ttriggerCount: integration.triggerCount + 1,\n\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn integration;\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetShowTriggerModal(false);\n\t\t\t\tsetEditingTrigger(null);\n\t\t\t} else {\n\t\t\t\tconst errorData = await response.json();\n\t\t\t\tlogger.error('Failed to save trigger:', errorData);\n\t\t\t\tthrow new Error(errorData.message || 'Failed to save trigger. Please try again.');\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tlogger.error('Error saving trigger:', error);\n\t\t\tconst errorMessage = error instanceof Error ? error.message : 'Error saving trigger. Please check your connection and try again.';\n\t\t\talert(errorMessage);\n\t\t} finally {\n\t\t\tsetSavingTrigger(false);\n\t\t}\n\t};\n\n\tconst selectedIntegrationData = integrations.find(i => i.slug === selectedIntegration);\n\n\treturn (\n\t\t<div className=\"wrap\">\n\t\t\t{currentView === 'list' ? (\n\t\t\t\t<IntegrationList\n\t\t\t\t\tintegrations={integrations}\n\t\t\t\t\tsettings={data.settings}\n\t\t\t\t\tonIntegrationClick={handleIntegrationClick}\n\t\t\t\t\tonAddTrigger={handleAddTriggerFromList}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\tselectedIntegrationData && (\n\t\t\t\t\t<IntegrationDetail\n\t\t\t\t\t\tintegration={{\n\t\t\t\t\t\t\t...selectedIntegrationData,\n\t\t\t\t\t\t\tsingleItemTriggers: userTriggers[selectedIntegration!]?.singleItem || []\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttriggers={userTriggers[selectedIntegration!]?.global || []}\n\t\t\t\t\t\tonBack={handleBackToList}\n\t\t\t\t\t\tonAddTrigger={handleAddTrigger}\n\t\t\t\t\t\tonEditTrigger={handleEditTrigger}\n\t\t\t\t\t\tonDeleteTrigger={handleDeleteTrigger}\n\t\t\t\t\t\tonSendTest={handleSendTest}\n\t\t\t\t\t\tdeletingTrigger={deletingTrigger}\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t)}\n\n\t\t\t{showTriggerModal && selectedIntegrationData && (\n\t\t\t\t<TriggerModal\n\t\t\t\t\tisOpen={showTriggerModal}\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tsetShowTriggerModal(false);\n\t\t\t\t\t\tsetEditingTrigger(null);\n\t\t\t\t\t}}\n\t\t\t\t\tonSave={handleSaveTrigger}\n\t\t\t\t\tonSendTest={handleSendTest}\n\t\t\t\t\tintegration={selectedIntegrationData}\n\t\t\t\t\teditingTrigger={editingTrigger}\n\t\t\t\t\tsavingTrigger={savingTrigger}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n};","/**\n * EchoDash React Admin Interface Entry Point\n * \n * This file initializes the React application within the WordPress admin context.\n */\n\nimport { createRoot } from 'react-dom/client';\nimport { App } from './App';\n\n// Import our styles (WordPress styles are loaded separately via PHP)\nimport './styles/shared.css';\n\n// Initialize the React app\nfunction initializeEchoDashApp(): void {\n\ttry {\n\t\tconst container = document.getElementById('echodash-react-app');\n\t\t\n\t\tif (container) {\n\t\t\tconst root = createRoot(container);\n\t\t\troot.render(<App />);\n\t\t\t\n\t\t\t// Mark the container as loaded\n\t\t\tcontainer.classList.add('loaded');\n\t\t\t\n\t\t\t// Remove the loading spinner\n\t\t\tconst loading = document.getElementById('echodash-loading');\n\t\t\tif (loading) {\n\t\t\t\tloading.style.display = 'none';\n\t\t\t}\n\t\t} else {\n\t\t\t// Container not found - likely not on EchoDash admin page\n\t\t}\n\t} catch {\n\t\t// Initialization failed - likely not on EchoDash admin page\n\t}\n}\n\n// Try to initialize immediately, or wait for DOM ready\nif (document.readyState === 'loading') {\n\tdocument.addEventListener('DOMContentLoaded', initializeEchoDashApp);\n} else {\n\tinitializeEchoDashApp();\n}"],"names":["m","exports","createRoot","hydrateRoot","module","window","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","EchoDashLogo","className","width","height","createElement","viewBox","fill","xmlns","d","fillRule","clipRule","IntegrationList","integrations","settings","onIntegrationClick","onAddTrigger","endpointUrl","setEndpointUrl","useState","endpoint","isSaving","setIsSaving","Fragment","href","target","rel","__","isConnected","htmlFor","type","id","placeholder","value","onChange","e","onBlur","async","fetch","ecdReactData","apiUrl","method","headers","nonce","body","JSON","stringify","ok","Error","alert","disabled","connectUrl","map","integration","key","slug","style","backgroundColor","iconBackgroundColor","src","icon","alt","name","triggerCount","onClick","IntegrationDetail","triggers","onBack","onEditTrigger","onDeleteTrigger","onSendTest","deletingTrigger","sendingTest","setSendingTest","sentTest","setSentTest","description","length","replace","trigger","index","setTimeout","handleSendTest","confirm","title","singleItemTriggers","triggerGroup","groupIndex","items","item","itemIndex","post_id","event_name","post_title","edit_url","MergeTagSelector","options","onSelect","isOpen","onClose","buttonRef","dropdownRef","useRef","position","setPosition","top","left","isInModal","setIsInModal","useEffect","current","buttonRect","getBoundingClientRect","modalParent","closest","bottom","dropdownRect","innerWidth","right","innerHeight","scrollY","scrollX","handleClickOutside","event","contains","document","addEventListener","removeEventListener","handleSelect","groupType","meta","ref","group","option","optionIndex","onKeyDown","preventDefault","tabIndex","role","String","preview","TriggerModal","onSave","editingTrigger","savingTrigger","availableTriggers","selectedTrigger","setSelectedTrigger","eventName","setEventName","getInitialEventName","firstTrigger","defaultEvent","keyValuePairs","setKeyValuePairs","getInitialKeyValuePairs","mappings","Array","isArray","pairs","mapping","push","Object","entries","openDropdownIndex","setOpenDropdownIndex","nameButtonRef","valueButtonRefs","slice","updateKeyValuePair","field","newPairs","addKeyValuePair","triggerId","find","t","handleTriggerChange","pair","el","filter","_","i","removeKeyValuePair","getCurrentTriggerOptions","mergeTag","prev","data","handleSave","App","currentView","setCurrentView","selectedIntegration","setSelectedIntegration","showTriggerModal","setShowTriggerModal","setEditingTrigger","userTriggers","setUserTriggers","setIntegrations","setSavingTrigger","setDeletingTrigger","i18n","history","pushState","location","pathname","search","url","URL","hash","toString","handlePopState","startsWith","urlParams","URLSearchParams","get","wpnonce","reload","eventConfig","previewResponse","integrationSlug","previewData","json","eventData","properties","processedData","testResponse","errorData","message","error","errorMessage","selectedIntegrationData","singleItem","global","handleBackToList","handleAddTrigger","response","updatedTriggers","Math","max","isEditing","triggerData","send_test","sendTest","result","integrationTriggers","availableTrigger","triggerDescription","enabled","newTrigger","Date","now","initializeEchoDashApp","container","getElementById","render","classList","add","loading","display","readyState"],"sourceRoot":""}